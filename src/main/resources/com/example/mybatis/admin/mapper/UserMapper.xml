<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mybatis.admin.mapper.UserMapper">
    <update id="update2">
        update study_java.user
        <set>
            <if test="userName != null">
                user_name=#{userName},
            </if>
            <if test="userPhone != null">
                user_phone=#{userPhone},
            </if>
            <if test="deptId != null">
                dept_id=#{deptId},
            </if>
            <if test="sex != null">
                sex=#{sex}
            </if>
        </set>
        where id = #{id}
    </update>
    <select id="getUserlist" resultType="com.example.mybatis.admin.User">
    select *
    from study_java.user
   <where>
    <if test="userName != null">
     user_name like concat('%', #{userName}, '%')
    </if>
    <if test="sex != null">
      and sex = #{sex}
    </if>
    <if test="startTime != null and endTime != null">
      and create_time between #{startTime} and #{endTime}
    </if>
   </where>
    order by create_time
</select>

</mapper>